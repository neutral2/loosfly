{*** 상품상세화면 | goods/goods_view.php ***}
{ # header }
<script src="../../../../lib/js/countdown.js"></script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ko_KR/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<script>
	function resizeFrameHeight(onm,height) {
		document.getElementById(onm).height = height;
	}
	
	function resizeFrameWidth(onm,width) {
		document.getElementById(onm).width = width;
	}

	var price = new Array();
	var reserve = new Array();
	var consumer = new Array();
	var memberdc = new Array();
	var realprice = new Array();
	var couponprice = new Array();
	var special_discount_amount = new Array();
	var coupon = new Array();
	var cemoney = new Array();
	var opt1img = new Array();
	var opt2icon = new Array();
	var opt2kind = "{optkind[1]}";
	var oldborder = "";
<!--{ @ _opt }-->
	<!--{ @ .value_ }-->
		<!--{ ? .index_ == 0 && ..index_ == 0 }-->
			var fkey = '{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}';
		<!--{ / }-->
			price['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..price};
			reserve['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..reserve};
			consumer['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..consumer};
			memberdc['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..memberdc};
			realprice['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..realprice};
			coupon['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..coupon};
			couponprice['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..couponprice};
			cemoney['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..coupon_emoney};
			special_discount_amount['{=get_js_compatible_key(..opt1)}{?..opt2}|{=get_js_compatible_key(..opt2)}{/}'] = {..special_discount_amount};
	<!--{ / }-->
<!--{ / }-->

<!--{ @ _opt1img }-->
	opt1img['{.key_}'] = "{.value_}";
<!--{ / }-->

<!--{ @ _opticon[1] }-->
	opt2icon['{.key_}'] = "{.value_}";
<!--{ / }-->



/* 필수 옵션 분리형 스크립트 start */
	var opt = new Array();
	opt[0] = new Array("('1차옵션을 먼저 선택해주세요','')");
<!--{ @ _opt }-->
	opt['{.index_+1}'] = new Array("('== 옵션선택 ==','')",<!--{ @ .value_ }-->"('{..opt2}{?..price!=price} ({=number_format(..price)}원){/}{?usestock&&!..stock} [품절]{/}','{..opt2}','{?usestock&&!..stock}soldout{/}')"{?..index_!=..size_-1},{/}<!--{ / }-->);
<!--{ / }-->

	function subOption(obj)
	{
		var el = document.getElementsByName('opt[]');
		var sub = opt[obj.selectedIndex];
		while (el[1].length>0) el[1].options[el[1].options.length-1] = null;
		for (i=0;i<sub.length;i++){
			var div = sub[i].replace("')","").split("','");
			eval("el[1].options[i] = new Option" + sub[i]);
			if (div[2]=="soldout"){
				el[1].options[i].style.color = "#808080";
				el[1].options[i].setAttribute('disabled','disabled');
			}
		}
		el[1].selectedIndex = el[1].preSelIndex = 0;
		if (el[0].selectedIndex == 0) chkOption(el[1]);
	
		if(el[0].selectedIndex != '0'){
			var txt = document.getElementsByName('opt_txt[]');
			var vidx = el[0].selectedIndex - 1;
			var v = el[0][el[0].selectedIndex].value;
			txt[0].value = v + '|' + vidx;
			subOption_fashion();
		}
	}
/* 필수 옵션 분리형 스크립트 end */

	function chkOptimg(){
		var opt = document.getElementsByName('opt[]');
		var key = opt[0].selectedIndex;
		var opt1 = opt[0][key].value;
		var ropt = opt1.split('|');
		chgOptimg(ropt[0])
	}
	
	function chgOptimg(opt1){
		if(opt1img[opt1]){
			objImg.src = (/^http(s)?:\/\//.test(opt1img[opt1])) ? opt1img[opt1] : "../data/goods/"+opt1img[opt1];
		}else{
			objImg.src = (/^http(s)?:\/\//.test('{r_img[0]}')) ? '{r_img[0]}' : "../data/goods/{r_img[0]}";
		}
	}

	function chkOption(obj){
		if (!selectDisabled(obj)) return false;
	}
	
	function act(target){
		var form = document.frmView;
		form.action = target + ".php";
	
		var opt_cnt = 0, data;
	
		nsGodo_MultiOption.clearField();
	
		for (var k in nsGodo_MultiOption.data) {
			data = nsGodo_MultiOption.data[k];
			if (data && typeof data == 'object') {
				nsGodo_MultiOption.addField(data, opt_cnt);
				opt_cnt++;
			}
		}
	
		if (opt_cnt > 0) {
	
			form.submit();
		}
		else {
			if (chkGoodsForm(form)) form.submit();
		}
	
		return;
	}

	function chgImg(obj){
		var objImg = document.getElementById('objImg');
		if (obj.getAttribute("ssrc")) objImg.src = obj.src.replace(/\/t\/[^$]*$/g, '/')+obj.getAttribute("ssrc");
		else objImg.src = obj.src.replace("/t/","/");
<!--{?detailView=='y'}-->
		// 디테일뷰 추가내용 2010.11.09
		if (obj.getAttribute("lsrc")) objImg.setAttribute("lsrc", obj.src.replace(/\/t\/[^$]*$/g, '/')+obj.getAttribute("lsrc"));
		else objImg.setAttribute("lsrc", obj.getAttribute("src").replace("/t/", "/").replace("_sc.", '.'));
		ImageScope.setImage(objImg, beforeScope, afterScope);
		// 디테일뷰 추가내용 2010.11.09
<!--{/}-->
	}

	function innerImgResize()	{ // 본문 이미지 크기 리사이징
		var objContents = document.getElementById('contents');
		var innerWidth = 645;
		var img = objContents.getElementsByTagName('img');
		for (var i=0;i<img.length;i++){
			img[i].onload = function(){
				if (this.width>innerWidth) this.width = innerWidth;
			};
		}
	}

<!--{?detailView=='y'}-->
	// 디테일뷰 추가내용 2010.11.09
	function beforeScope() {
		document.getElementsByName("frmView")[0].style.visibility = "hidden";
	}
	
	function afterScope() {
		document.getElementsByName("frmView")[0].style.visibility = "visible";
	}
	// 디테일뷰 추가내용 2010.11.09
<!--{/}-->

<!--{?naverNcash=='Y'}-->
	function mileage_info() {
	window.open("http://static.mileage.naver.net/static/20130708/ext/intro.html", "mileageIntroPopup", "width=404, height=412, status=no, resizable=no");
	}
<!--{/}-->

	function qr_explain(){
		var qrExplainObj = document.getElementById("qrExplain");
	
		qrExplainObj.style.top = event.clientY + document.body.scrollTop - 15;
		qrExplainObj.style.left = event.clientX + document.body.scrollLeft + 40;
		qrExplainObj.style.display = "block";
	}
	
	function qrExplain_close(){
		var qrExplainObj = document.getElementById("qrExplain");
		qrExplainObj.style.display = "none";
	}
</script>

<script language="javascript">
// 패션 기능관련 스크립트
	function click_opt_fastion(idx,vidx,v){
		var el = document.getElementsByName('opt_txt[]');
		el[idx].value = v + '|' + vidx;
	
		if(idx == 0){
			var obj = document.getElementsByName('opt[]')[0];
			obj.selectedIndex = parseInt(vidx)+1 ;
			subOption(obj);
			chkOptimg();
		}else if(idx == 1){
			var obj = document.getElementsByName('opt[]')[1];
			obj.selectedIndex = vidx;
			chkOption(obj);
		}
	}

	function subOption_fashion(){
		var el = document.getElementsByName('opt_txt[]');
		var el2 = document.getElementById('dtdopt2');
		var idx = el[0].value.split("|");
		var vidx = parseInt(idx[1])+1;
		var sub = opt[vidx];
		if(el2)el2.innerHTML = '';
		var n = 1;
		for (i=0;i<sub.length;i++){
			var div = sub[i].replace("')","").split("','");
			if(div[1]){
				if(opt2kind == 'img'){
					if(el2)el2.innerHTML += "<div style='width:43px;float:left;padding:5 0 5 0'><a href=\"javascript:click_opt_fastion('1','"+i+"','"+div[1]+"');nsGodo_MultiOption.set();\" name='icon2[]'><img id='opticon1_"+i+"' width='40' src='../data/goods/"+opt2icon[div[1]]+"' style='border:1px #cccccc solid' onmouseover=\"onicon(this);\" onmouseout=\"outicon(this)\" onclick=\"clicon(this)\"></a></div>";
				}else{
					if(el2)el2.innerHTML += "<div style='width:18px;float:left;padding-top:5px'><a href=\"javascript:click_opt_fastion('1','"+i+"','"+div[1]+"');subOption_fashion();nsGodo_MultiOption.set();\" name='icon2[]'><span style=\"float:left;width:15;height:15;border:1px #cccccc solid;background-color:#"+opt2icon[div[1]]+"\" onmouseover=\"onicon(this);\" onmouseout=\"outicon(this)\" onclick=\"clicon(this)\"></span></a></div>";
				}
			}else n++;
		}
	}

	function onicon(obj){
		oldborder = obj.style.border;
		obj.style.border="1 #333333 solid";
	}
	function outicon(obj){
		obj.style.border = oldborder;
	}

	function clicon(obj){
		var p = obj.parentNode.name;
		var ac = document.getElementsByName(p);
		if(ac){
			for(var i=0;i<ac.length;i++){
				ac[i].childNodes[0].style.border = "1 #cccccc solid";
			}
			obj.style.border="1 #333333 solid";
			oldborder="1 #333333 solid";
		}
	}

	function selicon(obj){
		var el = document.getElementsByName('opt[]');
		var idx = obj.selectedIndex - 1;
		if(obj == el[0]){
			var v = document.getElementsByName('icon[]');
			if (v.length > 0) {
				v = v[idx].childNodes[0];
				clicon(v);
			}
	
		}else{
			var v = document.getElementsByName('icon2[]');
			if (v.length > 0) {
				v = v[idx].childNodes[0];
				clicon(v);
			}
		}
	}

	function cp_explain(obj){
		var cp_explainObj = document.getElementById("cp_explain" + obj);
		cp_explainObj.style.top = event.clientY + document.body.scrollTop;
		cp_explainObj.style.left = event.clientX + document.body.scrollLeft ;
		cp_explainObj.style.display = "block";
	}
	
	function cp_explain_close(obj){
		var cp_explainObj = document.getElementById("cp_explain"+ obj);
		cp_explainObj.style.display = "none";
	}
	
	function fnRequestStockedNoti(goodsno) {
		window.open('./popup_request_stocked_noti.php?goodsno='+goodsno,360,230, 'scrollbars=no');
	}
	
	function fnPreviewGoods_(goodsno) {
		popup('../goods/goods_view.php?goodsno='+goodsno+'&preview=y','800','450');
	}
	
	function fnGodoTooltipShow_(obj) {
	
		var tooltip = document.getElementById('el-godo-tooltip-related');
		tooltip.innerText = obj.getAttribute('tooltip');
	
		var pos_x = event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
		var pos_y = event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
	
		tooltip.style.top = (pos_y + 10) + 'px';
		tooltip.style.left = (pos_x + 10) + 'px';
		tooltip.style.display = 'block';
	}

	function fnGodoTooltipHide_(obj) {
		var tooltip = document.getElementById('el-godo-tooltip-related');
		tooltip.innerText = '';
		tooltip.style.display = 'none';
	}

var nsGodo_MultiOption = function() {
	function size(e) {

		var cnt = 0;
		var type = '';

		for (var i in e) {
			cnt++;
		}

		return cnt;
	}

	return {
		_soldout : {?runout}true{:}false{/},
		data : [],
		data_size : 0,
		_optJoin : function(opt) {

			var a = [];

			for (var i=0,m=opt.length;i<m ;i++) {
				if (typeof opt[i] != 'undefined' && opt[i] != '') {
					a.push(opt[i]);
				}
			}

			return a.join(' / ');

		},
		getFieldTag : function (name, value) {
			var el = document.createElement('input');
			el.type = "hidden";
			el.name = name;
			el.value = value;

			return el;

		},
		clearField : function() {

			var form = document.getElementsByName('frmView')[0];

			var el;

			for (var i=0,m=form.elements.length;i<m ;i++) {
				el = form.elements[i];

				if (typeof el == 'undefined' || el.tagName == "FIELDSET") continue;

				if (/^multi\_.+/.test(el.name)) {
					el.parentNode.removeChild(el);
					i--;
				}

			}

		},
		addField : function(obj, idx) {

			var _tag;
			var form = document.getElementsByName('frmView')[0];

			for(var k in obj) {

				if (typeof obj[k] == 'undefined' || typeof obj[k] == 'function' || (k != 'opt' && k != 'addopt' && k != 'ea' && k != 'addopt_inputable')) continue;

				switch (k) {
					case 'ea':
						_tag = this.getFieldTag('multi_'+ k +'['+idx+']', obj[k]);
						form.appendChild(_tag);

						break;
					case 'addopt_inputable':
					case 'opt':
					case 'addopt':
						//hasOwnProperty
						for(var k2 in obj[k]) {
							if (typeof obj[k][k2] == 'function') continue;
							_tag = this.getFieldTag('multi_'+ k +'['+idx+'][]', obj[k][k2]);
							form.appendChild(_tag);
						}

						break;
					default :
						continue;
						break;
				}
			}
		},
		set : function() {

			var add = true;

			// 선택 옵션
			var opt = document.getElementsByName('opt[]');
			for (var i=0,m=opt.length;i<m ;i++ ) {
				if (typeof(opt[i])!="undefined") {
					if (opt[i].value == '') add = false;
				}
			}

			// 추가 옵션?
			var addopt = document.getElementsByName('addopt[]');
			for (var i=0,m=addopt.length;i<m ;i++ ) {
				if (typeof(addopt[i])!="undefined") {
					if (addopt[i].value == '' /*&& addopt[i].getAttribute('required') != null*/) add = false;
				}
			}

			// 입력 옵션은 이곳에서 체크 하지 않는다.
			if (add == true) {
				this.add();
			}
		},
		del : function(key) {

			this.data[key] = null;
			var tr = document.getElementById(key);
			tr.parentNode.removeChild(tr);
			this.data_size--;

			// 총 금액
			this.totPrice();

		},
		add : function() {

			var self = this;

			if (self._soldout) {
				alert("품절된 상품입니다.");
				return;
			}

			var form = document.frmView;
			if(!(form.ea.value>0)) {
				alert("구매수량은 1개 이상만 가능합니다");
				return;
			}
			else
			{
				try
				{
					var step = form.ea.getAttribute('step');
					if (form.ea.value % step > 0) {
						alert('구매수량은 '+ step +'개 단위로만 가능합니다.');
						return;
					}
				}
				catch (e)
				{}
			}

			if (chkGoodsForm(form)) {

				var _data = {};

				_data.ea = document.frmView.ea.value;
				_data.sales_unit = document.frmView.ea.getAttribute('step') || 1;
				_data.opt = new Array;
				_data.addopt = new Array;
				_data.addopt_inputable = new Array;

				// 기본 옵션
				var opt = document.getElementsByName('opt[]');
				
				if (opt.length > 0) {

					_data.opt[0] = opt[0].value;
					_data.opt[1] = '';
					if (typeof(opt[1]) != "undefined") _data.opt[1] = opt[1].value;

					var key = _data.opt[0] + (_data.opt[1] != '' ? '|' + _data.opt[1] : '');

					// 가격
					if (opt[0].selectedIndex == 0) key = fkey;
					key = self.get_key(key);	// get_js_compatible_key 참고
				
					if (typeof(price[key])!="undefined") {

						_data.price = price[key];
						_data.reserve = reserve[key];
						_data.consumer = consumer[key];
						_data.realprice = realprice[key];
						_data.couponprice = couponprice[key];
						_data.coupon = coupon[key];
						_data.cemoney = cemoney[key];
						_data.memberdc = memberdc[key];
						_data.special_discount_amount = special_discount_amount[key];
					}
					else {
						// @todo : 메시지 정리
						alert('추가할 수 없음.');
						return;
					}

				}
				else {
					// 옵션이 없는 경우(or 추가 옵션만 있는 경우) 이므로 멀티 옵션 선택은 불가.
					return;
				}

				// 추가 옵션
				var addopt = document.getElementsByName('addopt[]');
				for (var i=0,m=addopt.length;i<m ;i++ ) {

					if (typeof addopt[i] == 'object') {
						_data.addopt.push(addopt[i].value);
					}

				}

				// 입력 옵션
				var addopt_inputable = document.getElementsByName('addopt_inputable[]');
				for (var i=0,m=addopt_inputable.length;i<m ;i++ ) {

					if (typeof addopt_inputable[i] == 'object') {
						var v = addopt_inputable[i].value.trim();
						if (v) {
							var tmp = addopt_inputable[i].getAttribute("option-value").split('^');
							tmp[2] = v;
							_data.addopt_inputable.push(tmp.join('^'));
						}

						// 필드값 초기화
						addopt_inputable[i].value = '';

					}

				}

				// 이미 추가된 옵션인지
				if (self.data[key] != null) {
					alert('이미 추가된 옵션입니다.');
					return false;
				}

				// 옵션 박스 초기화
				for (var i=0,m=addopt.length;i<m ;i++ ) {
					if (typeof addopt[i] == 'object') {
						addopt[i].selectedIndex = 0;
					}
				}
				//opt[0].selectedIndex = 0;
				//subOption(opt[0]);

				document.getElementById('el-multi-option-display').style.display = 'block';

				// 행 추가
				var childs = document.getElementById('el-multi-option-display').childNodes;
				for (var k in childs) {
					if (childs[k].tagName == 'TABLE') {
						var table = childs[k];
						break;
					}
				}

				var td, tr = table.insertRow(0);
				var html = '';

				tr.id = key;

				// 입력 옵션명
				td = tr.insertCell(-1);
				html = '<div style="font-size:11px;color:#010101;padding:3px 0 0 8px;">';
				var tmp,tmp_addopt = [];
				for (var i=0,m=_data.addopt_inputable.length;i<m ;i++ )
				{
					tmp = _data.addopt_inputable[i].split('^');
					if (tmp[2]) tmp_addopt.push(tmp[2]);
				}
				html += self._optJoin(tmp_addopt);
				html += '</div>';

				// 옵션명
				html += '<div style="font-size:11px;color:#010101;padding:3px 0 0 8px;">';
				td.style.cssText = 'padding-left:25px;text-align:left;width:100px;';
				html = '<div style="font-size:11px;color:#010101;">';
				html += self._optJoin(_data.opt);
				html += '</div>';

				// 추가 옵션명
				html += '<div style="font-size:11px;color:#A0A0A0;">';
				var tmp,tmp_addopt = [];
				for (var i=0,m=_data.addopt.length;i<m ;i++ )
				{
					tmp = _data.addopt[i].split('^');
					if (tmp[2]) tmp_addopt.push(tmp[2]);
				}
				html += self._optJoin(tmp_addopt);
				html += '</div>';
				td.innerHTML = html;

				// 수량
				td = tr.insertCell(-1);
				td.style.cssText = 'text-align:left;width:80px;';
				html = '';
				html += '<div style="float:left;"><input type=text name=_multi_ea[] id="el-ea-'+key+'" size=2 value='+ _data.ea +' style="border:1px solid #D3D3D3;width:30px;text-align:right;height:20px" onblur="nsGodo_MultiOption.ea(\'set\',\''+key+'\',this.value);"></div>';
				html += '<div style="float:left;padding-left:3px">';
				html += '<div style="padding:1px 0 2px 0"><img src="../img/common/btn_multioption_ea_up.gif" onClick="nsGodo_MultiOption.ea(\'up\',\''+key+'\');" style="cursor:pointer"></div>';
				html += '<div><img src="../img/common/btn_multioption_ea_down.gif" onClick="nsGodo_MultiOption.ea(\'down\',\''+key+'\');" style="cursor:pointer"></div>';
				html += '</div>';
				td.innerHTML = html;

				// 옵션가격
				_data.opt_price = _data.price;
				for (var i=0,m=_data.addopt.length;i<m ;i++ )
				{
					tmp = _data.addopt[i].split('^');
					if (tmp[3]) _data.opt_price = _data.opt_price + parseInt(tmp[3]);
				}
				for (var i=0,m=_data.addopt_inputable.length;i<m ;i++ )
				{
					tmp = _data.addopt_inputable[i].split('^');
					if (tmp[3]) _data.opt_price = _data.opt_price + parseInt(tmp[3]);
				}
				td = tr.insertCell(-1);
				td.style.cssText = 'padding-right:10px;width:110px;text-align:right;font-weight:bold;color:#6A6A6A;vertical-align:middle;';
				html = '';
				html += '<span id="el-price-'+key+'">'+comma( _data.opt_price *  _data.ea) + '원</span>';
				html += '<a href="javascript:void(0);" onClick="nsGodo_MultiOption.del(\''+key+'\');return false;"><img src="../img/common/btn_multioption_del.gif"></a>';
				td.innerHTML = html;

				self.data[key] = _data;
				self.data_size++;

				// 총 금액
				self.totPrice();


			}
		},
		ea : function(dir, key,val) {	// up, down

			var min_ea = 0, max_ea = 0, remainder = 0;

			if (document.frmView.min_ea) min_ea = parseInt(document.frmView.min_ea.value);
			if (document.frmView.max_ea) max_ea = parseInt(document.frmView.max_ea.value);

			if (dir == 'up') {
				this.data[key].ea = (max_ea != 0 && max_ea <= this.data[key].ea) ? max_ea : parseInt(this.data[key].ea) + parseInt(this.data[key].sales_unit);
			}
			else if (dir == 'down')
			{
				if ((parseInt(this.data[key].ea) - 1) > 0)
				{
					this.data[key].ea = (min_ea != 0 && min_ea >= this.data[key].ea) ? min_ea : parseInt(this.data[key].ea) - parseInt(this.data[key].sales_unit);
				}

			}
			else if (dir == 'set') {

				if (val && !isNaN(val))
				{
					val = parseInt(val);

					if (max_ea != 0 && val > max_ea)
					{
						val = max_ea;
					}
					else if (min_ea != 0 && val < min_ea) {
						val = min_ea;
					}
					else if (val < 1)
					{
						val = parseInt(this.data[key].sales_unit);
					}

					remainder = val % parseInt(this.data[key].sales_unit);

					if (remainder > 0) {
						val = val - remainder;
					}

					this.data[key].ea = val;

				}
				else {
					alert('수량은 1 이상의 숫자로만 입력해 주세요.');
					return;
				}
			}

			document.getElementById('el-ea-'+key).value = this.data[key].ea;
			document.getElementById('el-price-'+key).innerText = comma(this.data[key].ea * this.data[key].opt_price) + '원';

			// 총금액
			this.totPrice();

		},
		totPrice : function() {
			var self = this;
			var totprice = 0;
			for (var i in self.data)
			{
				if (self.data[i] !== null && typeof self.data[i] == 'object') totprice += self.data[i].opt_price * self.data[i].ea;
			}
			if( totprice == 0 ) document.getElementById('el-multi-option-display').style.display = 'none';
			document.getElementById('el-multi-option-total-price').innerText = comma(totprice) + '원';
		},
		get_key : function(str) {

			str = str.replace(/&/g, "&amp;").replace(/\"/g,'&quot;').replace(/</g,'&lt;').replace(/>/g,'&gt;');

			var _key = "";

			for (var i=0,m=str.length;i<m;i++) {
				_key += str.charAt(i) != '|' ? str.charCodeAt(i) : '|';
			}

			return _key.toUpperCase();
		}
	}
}();

function chkGoodsForm(form) {

	if (form.min_ea)
	{
		if (parseInt(form.ea.value) < parseInt(form.min_ea.value))
		{
			alert('최소구매수량은 ' + form.min_ea.value+'개 입니다.');
			return false;
		}
	}

	if (form.max_ea)
	{
		if (parseInt(form.ea.value) > parseInt(form.max_ea.value))
		{
			alert('최대구매수량은 ' + form.max_ea.value+'개 입니다.');
			return false;
		}
	}

	try
	{
		var step = form.ea.getAttribute('step');
		if (form.ea.value % step > 0) {
			alert('구매수량은 '+ step +'개 단위만 가능합니다.');
			return false;
		}
	}
	catch (e)
	{}

	var res = chkForm(form);

	// 입력옵션 필드값 설정
	if (res)
	{
		var addopt_inputable = document.getElementsByName('addopt_inputable[]');
		for (var i=0,m=addopt_inputable.length;i<m ;i++ ) {

			if (typeof addopt_inputable[i] == 'object') {
				var v = addopt_inputable[i].value.trim();
				if (v) {
					var tmp = addopt_inputable[i].getAttribute("option-value").split('^');
					tmp[2] = v;
					v = tmp.join('^');
				}
				else {
					v = '';
				}
				document.getElementsByName('_addopt_inputable[]')[i].value = v;
			}
		}
	}

	return res;

}
</script>

<script type="text/javascript" language="javascript">
	$(document).ready(function() {
		/* 사이트 슬라이드 - 2 set */
		var site_max = $('.thumbnail_box > div').length;
		var site_num = 1;
		if(site_num == 1){
			$('.site_set1').css('top','0px');
			$('.site_set2').css('top','680px');
		}else if(site_num == 2){
			$('.site_set1').css('top','-680px');
			$('.site_set2').css('top','0px');
		}
	
		po_top1 = parseFloat($('.site_set1').css('top'));
		po_top2 = parseFloat($('.site_set2').css('top'));
	
		$('.btn_siteD').bind('click', function() {
			ani_speed = 1000;
			if(!$('*').is(':animated')){
				site_num++;
				if(site_num > site_max){
					site_num = 1;
				}
	
				po_top1 += -680;
				po_top2 += -680;
	
				if(po_top1 < -680) { po_top1 = 0; }
				if(po_top2 < -680) { po_top2 = 0; }
			
				if(site_num == 1){
					$('.site_set1').css({top:'680px'});
				}else if(site_num == 2){
					$('.site_set2').css({top:'680px'});
				}
					
				$('.site_set1').animate({top:po_top1 + 'px'}, ani_speed);
				$('.site_set2').animate({top:po_top2 + 'px'}, ani_speed);
			}
			return false;
		});
	
		$('.btn_siteU').bind('click', function() {
			if(!$('*').is(':animated')){
				site_num--;
				if(site_num < 1){
					site_num = site_max;
				}
	
				po_top1 += 680;
				po_top2 += 680;
	
				if(po_top1 > 680) { po_top1 = 0; }
				if(po_top2 > 680) { po_top2 = 0; }
			
				if(site_num == 1){
					$('.site_set1').css({top:'-680px'});
				}else if(site_num == 2){
					$('.site_set2').css({top:'-680px'});
				}
	
				$('.site_set1').animate({top:po_top1 + 'px'}, 1000);
				$('.site_set2').animate({top:po_top2 + 'px'}, 1000);
			}
			return false;
		});
	
		/* 사이트 버튼 */
		$('.btn_siteU').hover(function() {
			$(this).css({'background-color':'#cfcfcf'});
		}, function() {
			$(this).css({'background-color':'#ffffff'});
		});
	
		$('.btn_siteD').hover(function() {
			$(this).css({'background-color':'#cfcfcf'});
		}, function() {
			$(this).css({'background-color':'#ffffff'});
		});
	});
	
	character_action=function(element, isOver) {
		element.src = (isOver) ? "/shop/skin/loosfly/img/jimmy/loos_02.gif" : "/shop/skin/loosfly/img/jimmy/loos_01.gif";
		document.getElementById("balloon").style.display = (isOver) ? "block" : "none";
	};	
</script>

<!-- 상품 이미지 -->
	<div style="height:15px;"></div>
	<div id="blkShopDetail">
		<div id="blkShopImage">
			<span onclick="popup('goods_popup_large.php?goodsno={goodsno}',800,600,'menubar=no,location=no,toolbar=no, scrollbars=yes, status=no, resizable=no')" style="cursor:pointer">{=goodsimg(r_img[0],560,'id=objImg')}</span>
		</div>
		<div id="blkShopThumbnail">
			<div id="thumbnail_outline" class="thumbnail_outline" style="">
				<div id="thumbnail_box" class="thumbnail_box">
					<div class="site_set1" style="top:0px;">
<?PHP $cnt = 0;?>
<!--{ @ t_img }-->
<?PHP if( $cnt > 0 && $cnt%5 == 0 ) { ?>
					</div>
					<div class="site_set<?PHP echo ( (int)($cnt/5) + 1 ); ?>" style="top:680px; ">
<?PHP } ?>
						<dl<?PHP if( $cnt > 0 && $cnt%5 == 0 ) echo " class=\"no_mar\""?>>
							<dd>{=goodsimg(.value_,100,"onmouseover='chgImg(this)' class='pointer' style='border:#3f3f3f 1px solid'")}<?PHP $cnt++; ?></dd>
						</dl>
<!--{ / }-->
					</div>
				</div>
<?PHP if( $cnt > 5) { ?>
				<span class="btn_siteU">▲</span>
				<span class="btn_siteD">▼</span>
<?PHP } ?>
			</div>
		</div>

<!-- 상품 스펙 리스트 -->
		<div id="blkShopMenu">
<!--디테일뷰수정--><!--{?detailView=='y'}--><div id="zoom_view" style="display:none; position:absolute; width:340px; height:370px;"></div><!--{/}--><!--디테일뷰수정-->
			<form name=frmView method=post onsubmit="return false">
			<input type=hidden name=mode value="addItem">
			<input type=hidden name=goodsno value="{goodsno}">
			<input type=hidden name=goodsCoupon value="{coupon}">
			<!--{ ? min_ea>1}--><input type="hidden" name="min_ea" value="{min_ea}"><!--{/}-->
			<!--{ ? max_ea!='0'}--><input type="hidden" name="max_ea" value="{max_ea}"><!--{ / }-->
			<div id="bxShopTitle">
			<!--{? clevel == '0' || slevel >= clevel }-->
				{goodsnm}
			<!--{: slevel < clevel && auth_step[1] == 'Y' }-->
				{goodsnm}
			<!--{/}-->
			</div>
			<div style="height:5px;"></div>
			<div id="bxShopSubtitle">
				<span class="goodnm_kr">{shortdesc}</span>
			</div>
			<div style="height:25px;"></div>
			<div id="bxGoodsInfo">
				<div style="height:10px;"></div>
<!--{? clevel == '0' || slevel >= clevel || (slevel < clevel && auth_step[2] == 'Y')}-->
				<table class="goods_info" border="0" cellpadding="0" cellspacing="0">
	<!--{ ? sales_status == 'ing'}-->
				<!--tr>
					<td colspan="2"><span style="padding-bottom:5px; padding-left:14px; color:#EF1C21">절찬리 판매중!!</span></td>
				</tr-->
	<!--{ : sales_status == 'range'}-->
				<tr>
					<th>남은시간 :</th>
					<td><span id="el-countdown-1" style="padding-bottom:5px;font:13pt bold;color:#EF1C21"></span></td>
				</tr>
				<script type="text/javascript">
					Countdown.init('{=date('Y-m-d H:i:s',sales_range_end)}', 'el-countdown-1');
				</script>
	<!--{ : sales_status == 'before'}-->
				<tr>
					<td colspan="2"><span style="padding-bottom:5px; padding-left:14px; color:#EF1C21">{=date('Y-m-d H:i:s',sales_range_start)} 판매시작합니다.</span></td>
				</tr>
	<!--{ : sales_status == 'end'}-->
				<tr>
					<td colspan="2"><span style="padding-bottom:5px; padding-left:14px; color:#EF1C21">판매가 종료되었습니다.</span></td>
				</tr>
	<!--{ / }-->

	<!--{ ? runout && _cfg_soldout.price == 'image'}-->
				<tr>
					<th>판매가격 :</th>
					<td><img src="../data/goods/icon/custom/soldout_price"></td>
				</tr>
	<!--{ : runout && _cfg_soldout.price == 'string'}-->
				<tr>
					<th>판매가격 :</th>
					<td><b>{_cfg_soldout.price_string}</b></td>
				</tr>
	<!--{ : !strprice }-->
				<tr>
					<th>판매가격 :</th>
					<td><b><span id=price>{=number_format(price-special_discount_amount)}</span>원</b><!--{ ? consumer && (consumer - price) > 0 }-->&nbsp;(<span style="color:#ff4c5d"><?PHP echo intval(({consumer} - {price})/{consumer}*100); ?>%↓</span>)<!--{ / }--></td>
				</tr>
		<!--{ ? special_discount_amount }-->
				<tr>
					<th>상품할인금액 :</th>
					<td>-{=number_format(special_discount_amount)}원&nbsp;(<span style="color:#ff4c5d"><?PHP echo intval({special_discount_amount}/{price}*100); ?>%↓</span>)</td>
				</tr>
		<!--{ / }-->
		<!--{ ? memberdc }-->
				<tr>
					<th>우수회원할인가 :</th>
					<td style="font-weight:bold"><span id=obj_realprice>{=number_format(realprice)}원&nbsp;(-{=number_format(memberdc)}원) &nbsp;<span style="color:#ff4c5d"><?PHP echo intval({memberdc}/{realprice}*100); ?>%↓</span></td>
				</tr>
		<!--{ / }-->
		<!--{ ? coupon }-->
				<tr>
					<th>쿠폰적용가 :</th>
					<td><span id=obj_coupon style="font-weight:bold;color:#EF1C21">{=number_format(couponprice)}원&nbsp;(-{=number_format(coupon)}원)</span><div>{about_coupon}</div></td>
				</tr>
		<!--{ / }-->
		<!--{ ? consumer }-->
				<tr>
					<th>소비자가격 :</th>
					<td>
					<span id=consumer>{=number_format(consumer)}</span>원
					</td>
				</tr>
		<!--{ / }-->
				<tr><th>적립금 :</th><td><span id=reserve>{=number_format(.reserve)} </span>원</td></tr>
		<!--{ ? naverNcash == 'Y' }-->
				<tr id="naver-mileage-accum" style="display: none;">
					<th>네이버&nbsp;&nbsp;<br/>마일리지 :</th>
					<td>
						<!--{ ? exception }-->
						{exception}
						<!--{ : }-->
						<span id="naver-mileage-accum-rate" style="font-weight:bold;color:#1ec228;"></span> 적립
						<!--{ / }-->
						<img src="\{_cfg.rootDir}/proc/naver_mileage/images/n_mileage_info4.png" onclick="javascript:mileage_info();" style="cursor: pointer; vertical-align: middle;">
					</td>
				</tr>
		<!--{ / }-->
		<!--{ ? coupon_emoney }-->
				<tr>
					<th>쿠폰적립금 :</th>
					<td><span id=obj_coupon_emoney style="font-weight:bold;color:#EF1C21"></span> &nbsp;<span style="font:bold 9pt tahoma; color:#FF0000" >{=number_format(coupon_emoney)}원</span></td>
				</tr>
		<!--{ / }-->
		<!--{ ? delivery_type == 1 }-->
				<tr><th>배송비 :</th><td>무료배송</td></tr>
		<!--{ : delivery_type == 2 }-->
				<tr><th>개별배송비 :</th><td>{=number_format(goods_delivery)}원</td></tr>
		<!--{ : delivery_type == 3 }-->
				<tr><th>착불배송비 :</th><td>{=number_format(goods_delivery)}원</td></tr>
		<!--{ : delivery_type == 4 }-->
				<tr><th>고정배송비 :</th><td>{=number_format(goods_delivery)}원</td></tr>
		<!--{ : delivery_type == 5 }-->
				<tr><th>수량별배송비 :</th><td>{=number_format(goods_delivery)}원 (수량에 따라 배송비가 추가됩니다.)</td></tr>
		<!--{ / }-->
	<!--{ : }-->
				<tr><th>판매가격 :</th><td><b>{strprice}</b></td></tr>
	<!--{ / }-->
				</table>
<!--{/}-->

				<table class="goods_info" border="0" cellpadding="0" cellspacing="0">
				<!--{ ? goods_status }--><tr height><th>상품상태 :</th><td>{goods_status}</td></tr><!--{ / }-->
				<!--{ ? manufacture_date }--><tr height><th>제조일자 :</th><td>{manufacture_date}</td></tr><!--{ / }-->
				<!--{ ? effective_date_start }--><tr height><th>유효일자 :</th><td>{effective_date_start} ~ {effective_date_end}</td></tr><!--{ / }-->
				<!--{ ? delivery_method }--><tr height><th>배송방법 :</th><td>{delivery_method}</td></tr><!--{ / }-->
				<!--{ ? delivery_area }--><tr height><th>배송지역 :</th><td>{delivery_area}</td></tr><!--{ / }-->
				<!--{ ? goodscd }--><tr><th>제품코드 :</th><td>{goodscd}</td></tr><!--{ / }-->
				<!--{ ? origin }--><tr><th>원산지 :</th><td>{origin}</td></tr><!--{ / }-->
				<!--{ ? maker }--><tr><th>제조사 :</th><td>{maker}</td></tr><!--{ / }-->
				<!--{ ? brand }--><tr><th>브랜드 :</th><td>{brand} <a href="../goods/goods_brand.php?brand={brandno}">[브랜드바로가기]</a></td></tr><!--{ / }-->
				<!--{ ? launchdt }--><tr><th>출시일 :</th><td>{launchdt}</td></tr><!--{ / }-->
				<!--{ @ ex }--><tr><th>{.key_} :</th><td>{.value_}</td></tr><!--{ / }-->

<!--{ ? !_opt }-->
				<tr>
					<th>구매수량 :</th>
					<td>
	<!--{ ? !runout }-->
						<div style="float:left;"><input type=text name=ea size=2 value={? min_ea}{min_ea}{:}1{/} class=line style="text-align:right;height:18px" step="{? sales_unit}{sales_unit}{:}1{/}" min="{? min_ea}{min_ea}{:}1{/}" max="{? max_ea}{max_ea}{:}0{/}" onblur="chg_cart_ea(frmView.ea,'set');"></div>
						<div style="float:left;padding-left:3">
							<div style="padding:1 0 2 0"><img src="../img/common/btn_plus.gif" onClick="chg_cart_ea(frmView.ea,'up')" style="cursor:pointer"></div>
							<div><img src="../img/common/btn_minus.gif" onClick="chg_cart_ea(frmView.ea,'dn')" style="cursor:pointer"></div>
						</div>
						<div style="padding-top:3; float:left">개</div>
						<div style="padding-left:10px;float:left" class="stxt">
							<!--{ ? min_ea>1}--><div>최소구매수량 : {min_ea}개</div><!--{ / }-->
							<!--{ ? max_ea!='0'}--><div>최대구매수량 : {max_ea}개</div><!--{ / }-->
							<!--{ ? sales_unit>1}--><div>묶음주문단위 : {sales_unit}개</div><!--{ / }-->
						</div>
	<!--{ : }-->
						품절된 상품입니다
	<!--{ / }-->
					</td>
				</tr>
<!--{ : }-->
				<input type=hidden name=ea step="{? sales_unit}{sales_unit}{:}1{/}" min="{? min_ea}{min_ea}{:}1{/}" max="{? max_ea}{max_ea}{:}0{/}" value={? min_ea}{min_ea}{:}1{/}>
<!--{ / }-->

<!--{ ? chk_point}-->
				<tr><th>고객선호도 :</th><td><!--{ @ array_fill(0,chk_point,'') }-->★<!--{ / }--></td></tr>
<!--{ / }-->
				<!--{ ? icon }--><tr><th>제품상태 :</th><td>{icon}</td></tr><!--{ / }-->
				</table>

<!--{ ? !strprice }-->

	<!-- 추가 옵션 입력형 -->
	<!--{ ? _addopt_inputable }-->
				<table border=0 cellpadding=0 cellspacing=0 class=top>
		<!--{ @ _addopt_inputable }-->
					<tr><th>{.key_} :</th>
					<td>
						<input type="hidden" name="_addopt_inputable[]" value="">
						<input type="text" name="addopt_inputable[]" label="{.key_}" option-value="{.sno}^{.key_}^{.opt}^{.addprice}" value="" { ? _addopt_inputable_req[.index_] }required fld_esssential{/} maxlength="{.opt}">
					</td></tr>
		<!--{ / }-->
				</table>
	<!--{ / }-->

	<!-- 필수 옵션 일체형 -->
	<!--{ ? _opt && _typeOption=="single" }-->
				<table class="goods_info" border="0" cellpadding="0" cellspacing="0">
				<tr>
					<th>{optnm} :</th>
					<td>
						<div>
							<select name="opt[]" onchange="chkOption(this);chkOptimg();nsGodo_MultiOption.set();" required fld_esssential msgR="{optnm} 선택을 해주세요">
								<option value="">== 옵션선택 ==
				<!--{ @ _opt }-->
					<!--{ @ .value_ }-->
								<option value="{..opt1}{?..opt2}|{..opt2}{/}" {?usestock&&!..stock} disabled class=disabled{/}>{..opt1}{?..opt2}/{..opt2}{/} {?..price!=price}({=number_format(..price)}원){/}
							<!--{ ? usestock && !..stock }--> [품절]<!--{ / }-->
					<!--{ / }-->
				<!--{ / }-->
							</select>
						</div>
					</td>
				</tr>
				</table>
	<!--{ / }-->

	<!--{ ? _opt && _typeOption=="double" }-->
				<!-- 필수 옵션 분리형 -->
				<table class="goods_info" border="0" cellpadding="0" cellspacing="0">
				<!--{ @ _optnm }-->
				<tr>
					<th valign="top" >{.value_} :</th>
					<td>
					<!-- 옵션 선택 -->
						<div>
					<!--{ ? !.index_ }-->
							<div>
								<select name="opt[]" onchange="subOption(this);chkOptimg();selicon(this);nsGodo_MultiOption.set();" required fld_esssential msgR="{.value_} 선택을 해주세요">
									<option value="">== 옵션선택 ==
						<!--{ @ (_opt) }-->
									<option value="{..key_}">{..key_}
						<!--{ / }-->
								</select>
							</div>
					<!--{ : }-->
								<select name="opt[]" onchange="chkOption(this);selicon(this);nsGodo_MultiOption.set();" required fld_esssential msgR="{.value_} 선택을 해주세요"><option value="">==선택==</select>
					<!--{ / }-->
						</div>
			<!--{? optkind[.index_] == 'img'}-->
				<!--{ ? !.index_ }-->
					<!--{ @ _opticon[.index_] }-->
						<!-- 옵션 이미지 아이콘 -->
						<div style='width:43px;float:left;padding:5 0 5 0'><a href="javascript:click_opt_fastion('{.index_}','{..index_}','{_opt[..key_][..index_].opt1}');" name="icon[]"><img width="40" id="opticon0_{..index_}" id="opticon_{.index_}_{..index_}" style="border:1px #cccccc solid" src='../data/goods/{..value_}'  onmouseover="onicon(this);chgOptimg('{..key_}');" onmouseout="outicon(this)" onclick="clicon(this)"></a></div>
					<!--{ / }-->
				<!--{ : }-->
						<div id="dtdopt2"></div>
				<!--{ / }-->
			<!--{ / }-->

			<!--{? optkind[.index_] == 'color'}-->
				<!--{ ? !.index_ }-->
					<!--{ @ _opticon[.index_] }-->
						<!-- 옵션 색상타입 아이콘 -->
						<div style='width:18px;float:left;padding-top:5px ' ><a href="javascript:click_opt_fastion('{.index_}','{..index_}','{..key_}');" style="cursor:hand;"  name="icon[]"><span  style="float:left;width:15px;height:15px;border:1px #cccccc solid;background-color:#{..value_}" onmouseover="onicon(this);chgOptimg('{..key_}');" onmouseout="outicon(this)" onclick="clicon(this)"></span></a></div>
					<!--{ / }-->
				<!--{ : }-->
						<div id="dtdopt2"></div>
				<!--{ / }-->
			<!--{ / }-->

						<input type="hidden" name="opt_txt[]" value="">
					</td>
				</tr>
		<!--{ / }-->
				</table>
				<script>subOption(document.getElementsByName('opt[]')[0])</script>
	<!--{ / }-->

				<!-- 추가 옵션 -->
				<table class="goods_info" border="0" cellpadding="0" cellspacing="0">
	<!--{ @ _addopt }-->
				<tr>
					<th>{.key_} :</th>
					<td>
		<!--{ ? _addoptreq[.index_] }-->
						<select name="addopt[]" required fld_esssential label="{.key_}" onchange="nsGodo_MultiOption.set();">
							<option value="">=={.key_} 선택==
		<!--{ : }-->
						<select name="addopt[]" label="{.key_}" onchange="nsGodo_MultiOption.set();">
							<option value="">=={.key_} 선택==
							<option value="-1">선택안함
		<!--{ / }-->
		<!--{ @ .value_ }-->
							<option value="{..sno}^{.key_}^{..opt}^{..addprice}">{..opt}<!--{ ? ..addprice }-->({=number_format(..addprice)}원 추가)<!--{ / }-->
		<!--{ / }-->
						</select>
					</td>
				</tr>
	<!--{ / }-->
				</table>
<style type="text/css">
	.goods-multi-option {display:none;}
</style>
				<div style="height:10px;"></div>
				<div id="el-multi-option-display" class="goods-multi-option">
					<table border="0" cellpadding="0" cellspacing="0">
					</table>
					<div style="height:5px;"></div>
					<div style="font-size:12px;text-align:right;padding:5px 20px 5px 0;border-top:1px solid #D3D3D3;">
						ㆍ&nbsp;&nbsp;총 금액 : <span style="color:#E70103;font-weight:bold;" id="el-multi-option-total-price"></span>
					</div>
				</div>
<!--{ / }-->
			</div>
			<div style="height:25px;"></div>
			<div id="bxShopBtn">
<!--{ ? stocked_noti}-->
				<div style="margin-bottom: 7px">품절된 옵션상품은 재입고 알림 신청을 통해서 입고 시 알림 서비스를 받으실 수 있습니다.</div>
<!--{ / }-->
<!--{ ? !strprice && !runout && (sales_status == 'ing' || sales_status == 'range')}-->
	<!--{? clevel == '0' || slevel >= clevel }-->
				<span><a href="javascript:act('/shop/order/order')"><img src="/shop/data/skin/loosfly/img/jimmy/buttons/buy_01.gif"></a></span>
				<span style="padding-left:5px"><a href="javascript:cartAdd(frmView,'{ cartCfg->redirectType }')"><img src="/shop/data/skin/loosfly/img/jimmy/buttons/cart_01.gif"></a></span>
				<span style="padding-left:72px"><a href="javascript:act('/shop/mypage/mypage_wishlist')"><img src="/shop/data/skin/loosfly/img/jimmy/buttons/wishlist_01.gif"></a></span>
	<!--{ / }-->
<!--{ / }-->
<!--{ ? stocked_noti}-->
				<a href="javascript:fnRequestStockedNoti('{goodsno}');"><img src="../img/stocked_noti/btn_alarm_2.gif"></a>
<!--{ / }-->
			</div>
			</form>
<?PHP 
	function getURL(){
		$server=getenv("SERVER_NAME");
		$file=getenv("SCRIPT-x_NAME");
		$query=getenv("QUERY_STRING");
		$url="http://$server$file";
		if($query) $url.="?$query";
		return $url;
	}
?>
			<div id="bxSNS">
				<div style="height:15px;"> </div>
				<div style="float:left;">Share this :&nbsp;</div>
				{snsBtn}
			</div>
		</div>
	</div>
	<div style="height:25px;"></div>
	<!--{? use_external_video }-->
	<div style="padding:10px 0" id="external-video">
		{=youtubePlayer(external_video_url, external_video_size_type, external_video_width, external_video_height)}
	</div>
	<div style="height:25px;"></div>
	<!--{/}-->

	<div id="blkGoodsDescription">
	<!--{ ? this->tpl_['side_inc'] }-->
		<div class="blkLeftMenu">
			{ # side_inc // 측면디자인 }
		</div>
	<!--{ / }-->
		<div id="blkContents">
			{longdesc}

			<!-- 관련상품 -->
			<table border="0" cellpadding="0" cellspacing="0" style="width:840px;margin-left:30px">
			<tr>
				<TD style="background: URL(../img/common/bar_detail_02.gif) no-repeat;" nowrap width="137" height="24"></TD>
				<TD style="background: URL(../img/common/bar_detail_02_bg.gif) repeat-x;" width="693"></TD>
				<TD style="background: URL(../img/common/bar_detail_02_right.gif) no-repeat;" nowrap width="10" height="24"></TD>
			</tr>
			</table>
			<div style="width:840px;margin:0 auto;padding:10px;overflow:hidden">
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
				<tr><td height="10"></td></tr>
				<tr>
<!--{ @ dataGoodsRelation( goodsno, _cfg_related.max ) }-->
					<!--{ ? .index_ && .index_% _cfg_related.horizontal ==0 }--></tr><tr><td height="10"></td></tr><tr><!--{ / }-->
					<td width="{100/_cfg_related.horizontal}%" valign="top" align="center"> 
						<div class="related_item" onclick="location.href='goods_view.php?goodsno={.goodsno}'">
							<!--{ ? _cfg_related.dp_image }-->
								{=goodsimg(.img_s,_cfg_related.size)}
							<!--{ / }-->
			<!--{ ? .soldout_icon }-->
							<div class="sold_out">out of stock</div>
			<!--{ :  .icon }-->
				<?PHP $pos = strpos({ .icon }, "icon_new"); if( $pos != false )  { ?>
							<span class="new_arrival">NEW</span>
				<?PHP } ?>
			<!--{ / }-->
							<div style="height:5px"></div>
							<!--{ ? _cfg_related.dp_goodsnm }--><div class="galary_name">{.goodsnm}</div><!--{ / }-->
							<!--{ ? _cfg_related.dp_price }--><div class="galary_price"><!--{ ? .strprice }-->{.strprice}<!--{ : }--> {=number_format(.price)}원<!--{ / }--> <!--{ ? _cfg_related.use_cart }--><a href="javascript:void(0);" onClick="fnPreviewGoods_({.goodsno});"><img src="{_cfg_related.cart_icon}"></a><!--{ / }--></div><!--{ / }-->
							<!--{ ? .coupon }--><div class="galary_coupon">{.coupon}<font class=small>원</font><img src="../../img/icon/good_icon_coupon.gif" align=absmiddle></div><!--{ / }-->	
						</div>
					</td>
<!--{ / }-->
				</tr>
				</table>
			</div>
			<!-- 상품 사용기 -->
			<iframe id="inreview" src="./goods_review_list.php?goodsno={goodsno}" frameborder="0" marginwidth="0" marginheight="0" height="" scrolling="no" style="width:840px;margin:0 30px"></iframe>

			<!-- 상품 질문과답변 -->
			<iframe id="inqna" src="./goods_qna_list.php?goodsno={goodsno}" frameborder="0" marginwidth="0" marginheight="0" height="" scrolling="no" style="width:840px;margin:0 30px"></iframe>
		</div>
	</div>
{ # footer }
<!--디테일뷰수정-->
<!--{?detailView=='y'}-->
<script type="text/javascript">
var objImg = document.getElementById("objImg");
objImg.setAttribute("lsrc", objImg.getAttribute("src").replace("/t/", "/").replace("_sc.", '.'));
ImageScope.setImage(objImg, beforeScope, afterScope);
</script>
<!--{/}-->
<!--디테일뷰수정-->